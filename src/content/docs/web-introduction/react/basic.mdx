---
title: React
description: ç”¨äºæ„å»º Web å’ŒåŸç”Ÿäº¤äº’ç•Œé¢çš„åº“
---

### ç¬¬ä¸€ä¸ª react é¡µé¢

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div class="root"></div>
    <!-- reactä¾èµ– -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <!-- babel  å°†jsxé¡µé¢è½¬ç§»ä¸ºjavascript-->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const root = ReactDOM.createRoot(document.querySelector('.root'))

      root.render(<h2>hello,React</h2>)
    </script>
  </body>
</html>
```

---

### jsx è¯­æ³•

JSX æ˜¯ JavaScript è¯­æ³•æ‰©å±•ï¼Œå¯ä»¥è®©ä½ åœ¨ JavaScript æ–‡ä»¶ä¸­ä¹¦å†™ç±»ä¼¼ HTML çš„æ ‡ç­¾ã€‚

**è§„åˆ™**

1. åªèƒ½è¿”å›ä¸€ä¸ªæ ¹å…ƒç´ 
2. æ ‡ç­¾å¿…é¡»é—­åˆ
3. ä½¿ç”¨é©¼å³°å¼å‘½åæ³•ç»™ å¤§éƒ¨åˆ†å±æ€§å‘½åï¼

```jsx
<img src="..." alt="..." className="photo" />
```

**react ä½¿ç”¨ jsx åŸå› **

1. éšç€ Web çš„äº¤äº’æ€§è¶Šæ¥è¶Šå¼ºï¼Œé€»è¾‘è¶Šæ¥è¶Šå†³å®šé¡µé¢ä¸­çš„å†…å®¹ã€‚**æ¸²æŸ“é€»è¾‘å’Œæ ‡ç­¾éœ€è¦å…±åŒå­˜åœ¨äºåŒä¸€ä¸ªåœ°æ–¹(react ç»„ä»¶)**ã€‚
2. å°†æ¸²æŸ“é€»è¾‘å’Œæ ‡ç­¾æ”¾åœ¨ä¸€èµ·å¯ä»¥ç¡®ä¿å®ƒä»¬åœ¨æ¯æ¬¡ç¼–è¾‘æ—¶éƒ½èƒ½ä¿æŒäº’ç›¸åŒæ­¥ã€‚
3. è¯­æ³•æ›´åŠ ä¸¥æ ¼å¹¶ä¸”å¯ä»¥åŠ¨æ€å±•ç¤ºä¿¡æ¯ã€‚

**jsx åµŒå…¥å˜é‡ä½œä¸ºå­å…ƒç´ **

1. å½“å˜é‡ä¸º`Number`,`String`,`Arrsy`ç±»å‹æ—¶å¯ç›´æ¥æ˜¾ç¤ºå†…å®¹ã€‚
2. å½“å˜é‡ä¸º`null`,`undefined`,`Boolean`ç±»å‹æ—¶æ˜¾ç¤ºä¸ºç©ºã€‚å¦‚æœéœ€è¦æ˜¾ç¤ºç±»å‹åç§°è½¬ä¸ºå­—ç¬¦ä¸²å³å¯ã€‚
3. `Object`ç±»å‹ä¸èƒ½ä½œä¸ºå­å…ƒç´ ã€‚

**react ä¸­ jsx çš„äº‹ä»¶ç»‘å®š**

åœ¨ react ä¸­ä½¿ç”¨ jsx äº‹ä»¶ç»‘å®šäº§ç”Ÿçš„ this æŒ‡å‘é—®é¢˜

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div class="root"></div>
    <!-- reactä¾èµ– -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>

    <!-- babel  å°†jsxé¡µé¢è½¬ç§»ä¸ºjavascript-->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const root = ReactDOM.createRoot(document.querySelector('.root'))

      class App extends React.Component {
        constructor() {
          super()
          this.state = {
            count: 100,
          }
        }

        btnHandle() {
          /*ç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡ŒonClick(),
          è¿™é‡Œåˆ™ä¸ºé»˜è®¤ç»‘å®šthisæŒ‡å‘undefined
          (classä¸‹ä»£ç ä¸ºä¸¥æ ¼æ¨¡å¼,ä¸¥æ ¼æ¨¡å¼ä¸‹é»˜è®¤ç»‘å®šthisä¸ºundefined)
           */
          this.setState({
            count: this.state.count + 1,
          })
        }

        render() {
          const { count } = this.state

          return (
            <div>
              <h2>{count}</h2>
              /* 1.ç»‘å®šç‚¹å‡»äº‹ä»¶å‡½æ•°äº§ç”Ÿçš„thisæŒ‡å‘é—®é¢˜,è¿™é‡Œç›¸å½“äºonClick = this.btnHandle
              */
              <button onClick={this.btnHandle}>+1</button>
            </div>
          )
        }
      }
      root.render(<App></App>)
    </script>
  </body>
</html>
```

ä¸‰ç§è§£å†³æ–¹å¼:

1. bind æ˜¾ç¤ºç»‘å®š this

```jsx
render () {
    const { count } = this.state

    return (
      <div>
        <h2>{count}</h2>
        {/* å½“å‰thisæŒ‡å‘çš„å°±æ˜¯å½“å‰ç»„ä»¶ */}
        <button onClick={this.btnHandle.bind(this)}>+1</button>
      </div>
)}
```

2. ä¿®æ”¹å‡½æ•°ä¸ºç®­å¤´å‡½æ•°

```jsx
/* ç®­å¤´å‡½æ•°æ²¡æœ‰thisæŒ‡å‘,åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨thisåˆ™ä¸ºä¸Šå±‚ä½œç”¨ä½œç”¨åŸŸ */

btnHandle = () => {
  this.setState({
    count: this.state.count + 1,
  })
}
```

3. æ”¹å˜è°ƒç”¨æ–¹å¼(**æœ€å¸¸ç”¨**)

```jsx
/* æ¯”bindæ–¹ä¾¿ æ›´å®¹æ˜“ä¼ å‚ ç›¸å½“äºç›´æ¥é€šè¿‡ç»„ä»¶è°ƒç”¨äº†btnHandleå‡½æ•° éšå¼ç»‘å®š*/

<button onClick={() => this.btnHandle()}>+1</button>
```

**æ¡ä»¶æ¸²æŸ“**

åœ¨ React ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ JavaScript çš„ `if` è¯­å¥ã€`&&` å’Œ `? :` è¿ç®—ç¬¦æ¥é€‰æ‹©æ€§åœ°æ¸²æŸ“ JSXã€‚

```jsx
return (
  <div>
    <h2>{true ? 'react' : 'none'}</h2>//react
  </div>
)
```

**åˆ—è¡¨æ¸²æŸ“**

```jsx
class App extends React.Component {
  peopleHandle() {
    const people = [
      {
        id: 0,
        name: 'å‡¯ç‘Ÿç³Â·çº¦ç¿°é€Š',
        profession: 'æ•°å­¦å®¶',
      },
      {
        id: 1,
        name: 'é©¬é‡Œå¥¥Â·è«åˆ©çº³',
        profession: 'åŒ–å­¦å®¶',
      },
      {
        id: 2,
        name: 'ç©†ç½•é»˜å¾·Â·é˜¿åœæœå‹’Â·è¨æ‹‰å§†',
        profession: 'ç‰©ç†å­¦å®¶',
      },
      {
        id: 3,
        name: 'ç€è¥¿Â·è±æ¸©Â·æœ±åˆ©äºš',
        profession: 'åŒ–å­¦å®¶',
      },
      {
        id: 4,
        name: 'è‹å¸ƒæ‹‰é©¬å°¼æ‰¬Â·é’±å¾·æ‹‰å¡å¡',
        profession: 'å¤©ä½“ç‰©ç†å­¦å®¶',
      },
    ]

    const chemists = people.filter((person) => person.profession === 'åŒ–å­¦å®¶')

    const listItems = chemists.map((person) => (
      <li key={person.id}>
        <b>{person.name}:</b>
        {' ' + person.profession + ' '}
      </li>
    ))

    return listItems
  }

  render() {
    return <ul>{this.peopleHandle()}</ul>
  }
}
```

React é‡Œ**éœ€è¦ key** å’Œæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶éœ€è¦æœ‰æ–‡ä»¶åçš„é“ç†æ˜¯ç±»ä¼¼çš„ã€‚å®ƒä»¬ï¼ˆkey å’Œæ–‡ä»¶åï¼‰éƒ½è®©æˆ‘ä»¬å¯ä»¥ä»ä¼—å¤šçš„å…„å¼Ÿå…ƒç´ ä¸­å”¯ä¸€æ ‡è¯†å‡ºæŸä¸€é¡¹ï¼ˆJSX èŠ‚ç‚¹æˆ–æ–‡ä»¶ï¼‰ã€‚

---

### è„šæ‰‹æ¶

è„šæ‰‹æ¶å¯ä»¥å¸®æˆ‘ä»¬å¿«é€Ÿç”Ÿæˆé¡¹ç›®çš„å·¥ç¨‹åŒ–ç»“æ„ã€‚

**å®‰è£… react è„šæ‰‹æ¶**

```shell
#å…¨å±€å®‰è£…
npm install -g create-react-app
```

**åˆ›å»º React é¡¹ç›®**

```shell
#é¡¹ç›®åç§°ä¸èƒ½åŒ…å«å¤§å†™å­—æ¯
create-react-app é¡¹ç›®åç§°
```

**å¯åŠ¨ React é¡¹ç›®**

åœ¨ package.json ä¸­å¯ä»¥æŸ¥çœ‹åˆ°å¯åŠ¨å‘½ä»¤

```shell
npm run start
```

![](/assets/images/web_introduction/react-start.png)

---

### ç»„ä»¶

åœ¨ React ä¸­ï¼Œç»„ä»¶æ˜¯ç”¨æˆ·ç•Œé¢çš„æ„å»ºå—ã€‚å®ƒä»¬æ˜¯å¯é‡ç”¨çš„ã€ç‹¬ç«‹çš„ä»£ç ç‰‡æ®µï¼Œä»£è¡¨ UI çš„ä¸€éƒ¨åˆ†ã€‚ React å…è®¸æ‚¨å°† UI åˆ†è§£ä¸ºæ›´å°çš„ç»„ä»¶ï¼Œä»è€Œæ›´è½»æ¾åœ°ç®¡ç†å’Œç»´æŠ¤ä»£ç ã€‚

**å‡½æ•°å¼ç»„ä»¶**

å‡½æ•°å¼ç»„ä»¶æ˜¯ React ä¸­ç®€å•çš„ç»„ä»¶ç±»å‹ã€‚å®ƒä»¬åŸºæœ¬ä¸Šæ˜¯è¿”å› JSX çš„ JavaScript å‡½æ•°ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

```jsx
function WelcomeMessage(props) {
  return <h1>æ¬¢è¿ï¼Œ{props.name}</h1>
}
```

**ç±»ç»„ä»¶**

ä¸å‡½æ•°å¼ç»„ä»¶ç›¸æ¯”ï¼Œç±»ç»„ä»¶æ›´ä¸ºå¤æ‚ã€‚é€šè¿‡ç»§æ‰¿å†…ç½®çš„ `Component`æ¥åˆ›å»ºä¸€ä¸ªç±»ã€‚

åˆ›å»º React ç±» ç»„ä»¶æ—¶ï¼Œç»„ä»¶çš„åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚

ç»„ä»¶å¿…é¡»åŒ…å«è¯¥`extends React.Component`è¯­å¥ã€‚è¯¥è¯­å¥å…è®¸æ‚¨çš„ç»„ä»¶å¯ä»¥è®¿é—® React.Component çš„å‡½æ•°ã€‚

è¯¥ç»„ä»¶è¿˜éœ€è¦ä¸€ä¸ª`render()`æ–¹æ³•ã€‚è¯¥æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªæœ‰æ•ˆçš„ React å…ƒç´ ã€‚

```jsx
import React from 'React'

export class App extends React.Component {
  constructor() {
    super()
    this.state = {
      count: 100,
    }
  }

  render() {
    const { count } = this.state

    return (
      <div>
        <h2>{count}</h2>
      </div>
    )
  }
}
```

**ç±»ç»„ä»¶ä¸å‡½æ•°å¼ç»„ä»¶çš„åŒºåˆ«**

- è¯­æ³•:å‡½æ•°å¼ç»„ä»¶åªæ˜¯ä¸€ä¸ªç®€å•çš„ JavaScript çº¯å‡½æ•°ï¼Œå®ƒæ¥å— props ä½œä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚è€Œç±»ç»„ä»¶éœ€è¦ç»§æ‰¿ React.Component ç±»å®ç°å¹¶éœ€è¦åˆ›å»ºä¸€ä¸ªè¿”å› React å…ƒç´ çš„æ¸²æŸ“(render)å‡½æ•°ã€‚

- çŠ¶æ€ç®¡ç†:åœ¨åˆæœŸç±»ç»„ä»¶æ˜¯ç®¡ç†çŠ¶æ€çš„å”¯ä¸€é€‰æ‹©ã€‚ä½†æ˜¯ 16.8 ç‰ˆæœ¬åä½¿ç”¨`useState`hook å‡½æ•°ç»„ä»¶ç°åœ¨å¯ä»¥åƒç±»ç»„ä»¶ä¸€æ ·ä¿å­˜å’Œæ›´æ–°çŠ¶æ€ã€‚

- ç”Ÿå‘½å‘¨æœŸæ–¹æ³•:ç±»ç»„ä»¶æä¾›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå¦‚ `componentDidMount`ã€`componentDidUpdate `å’Œ` componentWillUnmount`ã€‚ä½†å‡½æ•°ç»„ä»¶å¿…é¡»å€Ÿç”¨ hook æä¾›çš„æ–¹æ³•æ¥å®ç°ç±»ä¼¼åŠŸèƒ½ã€‚

- this å…³é”®å­—:ç±»ç»„ä»¶ä½¿ç”¨**this**å…³é”®å­—ï¼Œè€Œå‡½æ•°ç»„ä»¶æ²¡æœ‰ this å…³é”®å­—ã€‚

### ç”Ÿå‘½å‘¨æœŸ

ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å‘ç”Ÿåœ¨ä»å®‰è£… React ç»„ä»¶(ç±»ç»„ä»¶)åˆ°å¸è½½çš„è¿‡ç¨‹ä¸­ã€‚

```jsx
class LifecycleExample extends React.Component {
  //1.constructor ä¼šåœ¨ç±»å¼ç»„ä»¶ æŒ‚è½½ï¼ˆæ·»åŠ åˆ°å±å¹•ä¸Šï¼‰ä¹‹å‰è¿è¡Œã€‚
  constructor() {}

  componentDidMount() {
    //componentDidMount ()æ–¹æ³•åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åï¼ˆå³ç¬¬ä¸€ä¸ª render() å‘¨æœŸä¹‹åï¼‰ç«‹å³æ‰§è¡Œã€‚
  }

  componentDidUpdate(prevProps, prevState) {
    //componentDidUpdate ()æ–¹æ³•åœ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜åç«‹å³æ‰§è¡Œã€‚
  }

  componentWillUnmount() {
    //componentDidUpdate ()æ–¹æ³•åœ¨ç»„ä»¶è¿›è¡Œé”€æ¯å‰ç«‹å³æ‰§è¡Œã€‚
  }

  //2.render ä¼šå®é™…æ¸²æŸ“æˆ–å°†æ‰€æœ‰ HTML æ’å…¥ DOMã€‚
  render() {
    return <div>...</div>
  }
}
```

**å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸ**

![](/assets/images/web_introduction/react-common-life.png)

**åŒ…å«ä¸å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸ**

![](/assets/images/web_introduction/react-all-life.png)

**ç”Ÿå‘½å‘¨æœŸæ•´ä½“æ¦‚è¿°**

- å®‰è£…é˜¶æ®µ

  åˆ›å»ºæ–°ç»„ä»¶å¹¶å°†å…¶æ’å…¥ DOM æ—¶é€šå¸¸ç§°ä¸ºâ€œåˆå§‹æ¸²æŸ“â€ã€‚å®Œæˆæ­¤é˜¶æ®µéœ€è¦å››ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚

  1. **æ„é€ å‡½æ•°()æ–¹æ³•** : æŒ‚è½½é˜¶æ®µè°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ã€‚æ­¤æ–¹æ³•ä¸»è¦ç”¨äºåˆå§‹åŒ–ç»„ä»¶çš„çŠ¶æ€å¹¶ç»‘å®šå°†åœ¨ç»„ä»¶ä¸­ä½¿ç”¨çš„äº‹ä»¶å¤„ç†ç¨‹åºæ–¹æ³•ã€‚æ„é€ å‡½æ•°æ–¹æ³•æ˜¯åœ¨ç»„ä»¶å¯åŠ¨æ—¶è°ƒç”¨çš„ï¼Œä½†åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰ã€‚

  2. **é™æ€ getDerivedStateFromProps()** : åˆå§‹åŒ–åï¼Œä¸‹ä¸€ä¸ªè°ƒç”¨çš„å‡½æ•°æ˜¯**static getDerivedStateFromProps()**ã€‚æ­¤æ–¹æ³•å…è®¸ç»„ä»¶æ ¹æ®å…¶ props çš„æ›´æ”¹æ¥æ›´æ–°å…¶çŠ¶æ€ã€‚å®ƒå¾ˆå°‘ä½¿ç”¨ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¼šå¯¼è‡´è®¸å¤šé”™è¯¯ã€‚è¯¥æ–¹æ³•ç”¨äºç”¨ä»»ä½• props å€¼ä¿®æ”¹ state å€¼ã€‚**getDerivedStateFromProps()**æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š**props**å’Œ**state**ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœä¸éœ€è¦æ›´æ”¹ï¼Œåˆ™è¿”å› nullã€‚

  3. **render() æ–¹æ³•** : å®ƒåœ¨ **getDerivedStateFromProps()** æ–¹æ³•ä¹‹åè°ƒç”¨ï¼Œé€šå¸¸ï¼Œrender æ–¹æ³•è¿”å›æœ€ç»ˆå°†è¢«æ¸²æŸ“çš„ JSXï¼Œä½†å®ƒä¹Ÿå¯ä»¥è¿”å›å…¶ä»–å€¼ã€‚

  4. **componentDidMount() æ–¹æ³•** : åœ¨ç»„ä»¶é¦–æ¬¡æ¸²æŸ“åï¼ˆå³ç¬¬ä¸€ä¸ª render() å‘¨æœŸä¹‹åï¼‰ç«‹å³æ‰§è¡Œã€‚æ­¤æ–¹æ³•ä¸»è¦ç”¨äºå¤„ç†æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œä¾‹å¦‚ API è°ƒç”¨æˆ–è®¾ç½®åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä¸»è¦è®¢é˜…ã€‚

- æ›´æ–°é˜¶æ®µ

  æ›´æ–°é˜¶æ®µæ˜¯æŒ‡ç»„ä»¶æœ‰ä»»ä½•æ›´æ–°æˆ–é‡æ–°æ¸²æŸ“æ—¶ã€‚å½“ props æˆ– state æ›´æ–°æ—¶ï¼Œä¼šè§¦å‘æ­¤é˜¶æ®µã€‚

  1. **shouldComponentUpdate æ–¹æ³•**:è¿™ä¹Ÿæ˜¯å¦ä¸€ç§å¾ˆå°‘ä½¿ç”¨çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å®ƒä¸“é—¨ç”¨äºæ€§èƒ½ä¼˜åŒ–ã€‚æ­¤æ–¹æ³•ä½¿æ‚¨å¯ä»¥æ§åˆ¶ç»„ä»¶æ˜¯å¦åº”å› å…¶ props æˆ–çŠ¶æ€çš„å˜åŒ–è€Œæ›´æ–°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“çŠ¶æ€æˆ– prop æ›´æ–°æ—¶ï¼Œç»„ä»¶å°†å§‹ç»ˆé‡æ–°æ¸²æŸ“ã€‚æ­¤æ–¹æ³•å¯ä»¥è¿”å› true æˆ– false æ¥ç¡®å®šæ˜¯å¦åº”æ›´æ–°ç»„ä»¶ã€‚
  2. **getSnapshotBeforeUpdate æ–¹æ³•**:getSnapshotBeforeUpdate() æ–¹æ³•åœ¨å½“å‰æ›´æ–°çš„æ›´æ”¹åº”ç”¨äº DOM ä¹‹å‰è¢«è°ƒç”¨ã€‚ä»æ­¤æ–¹æ³•è¿”å›çš„å€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™ componentDidUpdate() æ–¹æ³•ã€‚æ­¤æ–¹æ³•åœ¨ render æ–¹æ³•ä¹‹åã€componentDidUpdate ä¹‹å‰è°ƒç”¨ã€‚
  3. **componentDidUpdate æ–¹æ³•**:æ­¤æ–¹æ³•æ˜¯æ­¤é˜¶æ®µä¸­æœ€åè°ƒç”¨çš„æ–¹æ³•ã€‚ä¸ä¸Šä¸€ä¸ªæ–¹æ³•ä¸€æ ·ï¼Œå®ƒä¹Ÿæ¥æ”¶è¾ƒæ—§çš„ props å’ŒçŠ¶æ€å€¼ä½œä¸ºå‚æ•°ï¼Œä½†å®ƒè¿˜æ¥æ”¶è¿”å›å€¼ getSnapshotBeforeUpdate() ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚å®ƒé€šå¸¸ç”¨äºæ ¹æ®æ¯”è¾ƒå…ˆå‰å’Œå½“å‰çš„ props å’ŒçŠ¶æ€å€¼çš„æ¡ä»¶å‘å‡ºæ›´å¤šçš„è·å–è¯·æ±‚ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥è°ƒç”¨ setStateï¼Œä½†å®ƒåº”è¯¥åœ¨æ¡ä»¶è¯­å¥å†…ã€‚

- å¸è½½é˜¶æ®µ

  å¸è½½é˜¶æ®µæ˜¯ React ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„æœ€åä¸€ä¸ªé˜¶æ®µã€‚æ­¤é˜¶æ®µæŒ‡çš„æ˜¯ç»„ä»¶ä» DOM ä¸­ç§»é™¤ï¼Œä¸å†å‘ˆç°æˆ–å¯è®¿é—®ã€‚

  1. **componentWillUnmount ()æ–¹æ³•**:componentWillUnmount() æ–¹æ³•åœ¨ç»„ä»¶ä» DOM ä¸­ç§»é™¤ä¹‹å‰è°ƒç”¨ã€‚å®ƒå…è®¸æ‚¨æ‰§è¡Œä»»ä½•å¿…è¦çš„æ¸…ç†ï¼Œä¾‹å¦‚å–æ¶ˆè®¡æ—¶å™¨ã€ç§»é™¤äº‹ä»¶ä¾¦å¬å™¨æˆ–æ¸…é™¤åœ¨å®‰è£…é˜¶æ®µè®¾ç½®çš„ä»»ä½•æ•°æ®ç»“æ„ã€‚

### ç»„ä»¶é€šè®¯

åœ¨ React ä¸­ï¼Œæ„å»ºåº”ç”¨ç¨‹åºé€šå¸¸è¢«æ¯”ä½œæ‹¼æ‹¼å›¾ã€‚æ¯ä¸ªç¢ç‰‡æˆ– React ç»„ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒï¼Œç”¨äºç®¡ç†å…¶çŠ¶æ€å’Œå‘ˆç°ã€‚React ç»„ä»¶çš„ç¾å¦™ä¹‹å¤„åœ¨äºå…¶å¯é‡ç”¨æ€§ï¼Œä»¥åŠæ˜“äºç»„åˆä»¥åˆ›å»ºå¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å®ç°å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€çš„è¿‡ç¨‹å³ä¸ºç»„ä»¶é€šè®¯ã€‚

åœ¨ React ä¸­ï¼Œç»„ä»¶ä¹‹é—´çš„é€šä¿¡åˆ†ä¸ºä¸‰ç±»ã€‚

- çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶çš„é€šä¿¡ã€‚
- å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶çš„é€šä¿¡ã€‚
- è·¨ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ã€‚

**React ç»„ä»¶å’Œ Props**

Props æ˜¯å±æ€§çš„ç¼©å†™ï¼Œæ˜¯ React ç»„ä»¶ç›¸äº’é€šä¿¡çš„æœºåˆ¶ã€‚å®ƒä»¬æ˜¯åªè¯»çš„ï¼Œå…è®¸å°†æ•°æ®ä»çˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶ã€‚Props å¯ä»¥åŒ…å«å­—ç¬¦ä¸²å’Œæ•°å­—ç­‰ç®€å•æ•°æ®ï¼Œä½†ä¹Ÿå¯ä»¥åŒ…æ‹¬å‡½æ•°ç”šè‡³å…¶ä»–ç»„ä»¶ã€‚

è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç»„ä»¶æ¥æ”¶ props çš„ç®€å•ç¤ºä¾‹ï¼š

```jsx
function WelcomeComponent({ name }) {
  return <h1>Hello, {name}!</h1>
}

const App = () => {
  return <WelcomeComponent name="Alice" />
}

export default App
```

åœ¨æ­¤ä»£ç ç‰‡æ®µä¸­ï¼Œ**WelcomeComponent**æ˜¯ä¸€ä¸ªå­ç»„ä»¶ï¼Œå®ƒä»**App**ç»„ä»¶ï¼ˆå³çˆ¶ç»„ä»¶ï¼‰æ¥æ”¶**name**ä½œä¸º prop ã€‚

**åœ¨ React ä¸­å°†ç»„ä»¶ä½œä¸º Props ä¼ é€’**

ä¼ é€’ props æ˜¯åœ¨ React ä¸­ç»„ä»¶ä¹‹é—´ä¼ è¾“æ•°æ®å’Œè¡Œä¸ºçš„æ ‡å‡†æ–¹æ³•ã€‚å½“æ‚¨å°†ç»„ä»¶ä½œä¸º prop ä¼ é€’æ—¶ï¼Œæ‚¨ä¼šä¸ºå­ç»„ä»¶æä¾›ä¸€ä¸ª React å…ƒç´ ï¼Œè¯¥å…ƒç´ å¯ä½œä¸ºå…¶è¾“å‡ºçš„ä¸€éƒ¨åˆ†è¿›è¡Œæ¸²æŸ“ã€‚

ä»¥ä¸‹æ˜¯å°†æŒ‰é’®ç»„ä»¶ä½œä¸º prop ä¼ é€’çš„åŸºæœ¬ç¤ºä¾‹ï¼š

```jsx
import React from 'react'

class Other extends React.Component {
  render() {
    const { el } = this.props

    return (
      <div>
        Otheré¡µé¢...
        {el}
      </div>
    )
  }
}

class App extends React.Component {
  render() {
    return (
      <div>
        <Other el={<button>æŸ¥çœ‹</button>}></Other>
      </div>
    )
  }
}

export default App
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ**Other**æ˜¯ä¸€ä¸ªæ¥å—æŒ‰é’®ä½œä¸º props çš„å­ç»„ä»¶ï¼Œè€Œ**App**æ˜¯å°†è¿™äº› props å‘ä¸‹ä¼ é€’çš„çˆ¶ç»„ä»¶ã€‚

**React å…ƒç´ ä½œä¸ºä¸€ç­‰å…¬æ°‘**

åœ¨ React ä¸­ï¼Œå…ƒç´ è¢«è§†ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åƒä»»ä½•å…¶ä»–å€¼ä¸€æ ·åœ¨åº”ç”¨ç¨‹åºä¸­ä¼ é€’ã€‚

```jsx
function Page({ header, content }) {
  return (
    <div>
      {header}
      <main>{content}</main>
    </div>
  )
}

const App = () => {
  const headerElement = <h1>Welcome to My Page</h1>
  const contentElement = <p>This is the page content.</p>

  return <Page header={headerElement} content={contentElement} />
}

export default App
```

åœ¨æ­¤ä»£ç ç‰‡æ®µä¸­ï¼Œ**Page æ˜¯ä¸€ä¸ªæ¥æ”¶** **header**å’Œ**content** React å…ƒç´ ä½œä¸º props çš„ç»„ä»¶ã€‚App**ç»„ä»¶**åˆ›å»ºè¿™äº›å…ƒç´ å¹¶å°†å®ƒä»¬ä¼ é€’ç»™**Page**ç»„ä»¶ã€‚

**Children Prop**

children å±æ€§æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œä¼šè‡ªåŠ¨ä¼ é€’ç»™æ¯ä¸ª React ç»„ä»¶ï¼Œå¯ç”¨äºåœ¨è°ƒç”¨ç»„ä»¶æ—¶æ¸²æŸ“åœ¨å¼€å§‹å’Œç»“æŸæ ‡ç­¾ä¹‹é—´åŒ…å«çš„å†…å®¹ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ children å±æ€§çš„ç¤ºä¾‹ï¼š

```jsx
import React from 'react'

class Page extends React.Component {
  render() {
    const { children } = this.props
    //ä¼ å…¥å¤šä¸ªå†…å®¹åˆ™å¯ä½¿ç”¨children[0] children[1]...çš„å½¢å¼è·å–å¯¹åº”çš„å†…å®¹
    return <div>{children}</div>
  }
}

class App extends React.Component {
  render() {
    return (
      <div>
        <Page>
          <h1>Pageé¡µé¢....</h1>
          <div>å…¶ä»–...</div>
        </Page>
      </div>
    )
  }
}

export default App
```

Page æ˜¯ä¸€ä¸ªå­ç»„ä»¶ï¼Œå®ƒä½¿ç”¨**children**å±æ€§æ¥å‘ˆç°å…¶å†…å®¹ã€‚App ç»„ä»¶å°†`h1`å’Œ`div`å…ƒç´ ä¼ é€’ç»™ Page ç»„ä»¶ã€‚

**Context**

å½“å±æ€§æ˜¯åº”ç”¨ç¨‹åºä¸­è®¸å¤šç»„ä»¶éƒ½éœ€è¦æ—¶ï¼Œä¸ºäº†é¿å…æ˜¾å¼åœ°é€šè¿‡ç»„ä»¶æ ‘çš„é€å±‚ä¼ é€’ `props`ã€‚Context æä¾›äº†ä¸€ç§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ­¤ç±»å€¼çš„æ–¹å¼ï¼Œè€Œæ— éœ€å°† props ä¼ é€’åˆ°ç»„ä»¶æ ‘çš„æ¯ä¸€å±‚ã€‚

React context çš„ä½¿ç”¨ä¼šç¯ç»•ä¸‰ä¸ªè§’è‰²åœ¨è¿ä½œï¼š

- Context Object
- Provider
- Consumer

React ä¸­å¯ä»¥æœ‰å¤šä¸ª contextã€‚æ¯ä¸ª context éƒ½å¯ä»¥ç†è§£ä¸ºå•ç‹¬çš„ä¸ªä½“(context Object)ã€‚å…¶ä¸­æ¯ä¸ªä¸ªä½“éƒ½ä¼šæ‹¥æœ‰ä¸¤ä¸ªå±æ€§:Providerï¼ˆæä¾›è€…ï¼‰ä¸ Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰ã€‚

- Providerï¼ˆæä¾›è€…ï¼‰çš„åŠŸç”¨å°±æ˜¯ç”¨æ¥**æä¾›**context å€¼ã€‚
- Consumerï¼ˆæ¶ˆè´¹è€…ï¼‰çš„åŠŸç”¨åˆ™æ˜¯ç”¨æ¥**ä½¿ç”¨**context å€¼ã€‚

ä½¿ç”¨æ­¥éª¤:

1. åˆ›å»º context

```jsx
const ThemeContext = React.createContext(defaultValue) //defaultValue:é»˜è®¤å€¼ å¯ä¸ºä»»æ„çš„å€¼
```

2. åœ¨ Provider ä¸­å­˜å…¥å…¬å…±å±æ€§

```jsx
<ThemeContext.Provider value={{ color: 'red' }}>
  <Page />
</ThemeContext.Provider>
```

3. Consumer æ¥æ”¶å…¬å…±å±æ€§

```jsx
function Button() {
  // ğŸŸ¡ é—ç•™æ–¹å¼ (ä¸æ¨è)
  //æ¨èé…åˆä½¿ç”¨hook  // âœ… æ¨èæ–¹å¼
  // const theme = useContext(ThemeContext);
  return (
    <ThemeContext.Consumer>
      {(theme) => <button style={{ color }} />}
    </ThemeContext.Consumer>
  )
}
```

ç±»ç»„ä»¶ä½¿ç”¨å¤šä¸ª context

```jsx
import React from 'react'
import { ThemeContext, StyleContext } from '../context/Theme.jsx'

class Page extends React.Component {
  render() {
    return (
      <ThemeContext.Consumer>
        {(theme) => {
          return (
            <button style={{ color: theme.color, fontSize: this.context.font }}>
              ++
            </button>
          )
        }}
      </ThemeContext.Consumer>
    )
  }
}

Page.contextType = StyleContext

export default Page
```

```jsx
import React from 'react'
import { ThemeContext, StyleContext } from './context/Theme.jsx'

import Page from './cnps/Page.jsx'

class App extends React.Component {
  render() {
    return (
      <div>
        <ThemeContext.Provider value={{ color: 'red' }}>
          <StyleContext.Provider value={{ font: '22px' }}>
            <Page></Page>
          </StyleContext.Provider>
        </ThemeContext.Provider>
      </div>
    )
  }
}

export default App
```

ä»¥ä¸Šä»£ç æˆ‘ä»¬åœ¨ App ç»„ä»¶ä¸­å¼•å…¥å¤šä¸ª context,åœ¨ Page ç»„ä»¶é‡‡ç”¨ä¸¤ç§æ–¹å¼è·å– context ä¸­çš„å…¬å…±å±æ€§ã€‚

ä»¥ä¸Šç¤ºä¾‹ä¹Ÿå¯ä»¥çœ‹ä½œä¸ºè·¨ç»„ä»¶é€šè®¯ç¤ºä¾‹ï¼Œé™¤æ­¤ä¹‹å¤–æƒ³è¦åšåˆ°è·¨ç»„ä»¶é€šä¿¡åˆ™éœ€è¦å€ŸåŠ©åˆ«çš„å·¥å…·ä¾‹:reduxã€‚

**å®ç°çˆ¶ç»„ä»¶ä¸å­ç»„ä»¶çš„é€šä¿¡**:

çˆ¶ç»„ä»¶

```jsx
import React from 'react'
import Children from './Children'

class Parent extends React.Component {
  render() {
    return (
      <div>
        å­ç»„ä»¶:
        <Children message={'æ¥è‡ªçˆ¶ç»„ä»¶çš„æ¶ˆæ¯'}></Children>
      </div>
    )
  }
}

export default Parent
```

å­ç»„ä»¶:

```jsx
import React from 'react'

class Children extends React.Component {
  render() {
    const { message } = this.props
    return <div>{`æ¥æ”¶åˆ°çˆ¶ç»„ä»¶çš„æ¶ˆæ¯:${message}`}</div>
  }
}

export default Children
```

**å®ç°å­ç»„ä»¶ä¸çˆ¶ç»„ä»¶çš„é€šä¿¡**:

çˆ¶ç»„ä»¶:

```jsx
import React from 'react'
import Children from './Children'

class Parent extends React.Component {
  constructor() {
    super()
    this.state = {
      //å¿ƒæƒ…
      mood: 'å¹³æ·¡',
    }
  }

  moodHandle(score) {
    console.log(score)
    switch (true) {
      case score >= 90:
        this.setState({
          mood: 'å¿ƒæƒ…æ„‰æ‚¦,æˆ‘å®¶å„¿å­å‡ºæ¯äº†',
        })
        break
      case score >= 60:
        this.setState({
          mood: 'å¿ƒæƒ…ç„¦è™‘,æ‹¿èµ·æ‰‹æœºå¯»æ‰¾èµ·äº†æ‰˜ç®¡ç­',
        })
        break
      case score >= 30:
        this.setState({
          mood: 'è„¸ä¸Šéœ²å‡ºäº†ç¬‘å®¹,ä½†ä½ ä¹‹æ„Ÿè§‰åˆ°äº†ææ€–',
        })
        break
      default:
        this.setState({
          mood: 'ç”Ÿäº†å¼Ÿå¼Ÿä¹Ÿä¼šçˆ±ä½ çš„,æ”¾å¿ƒå§ å®è´~',
        })
        break
    }
  }

  render() {
    const { mood } = this.state
    return (
      <div>
        <p style={{ color: '#FFC938' }}>å®è´~ä»Šå¤©è€ƒäº†å¤šå°‘åˆ†å‘€:</p>

        {/* ä¼ é€’ç»™å­ç»„ä»¶ä¸€ä¸ªå›è°ƒå‡½æ•°ç”¨äºæ›´æ–°çˆ¶ç»„ä»¶çŠ¶æ€ */}
        <Children sayYourScore={(score) => this.moodHandle(score)}></Children>
        <p>æ­¤æ—¶æ­¤åˆ»å¦ˆå¦ˆçš„å¿ƒæƒ…:</p>
        <h1 style={{ color: '#FF511C' }}>{mood}</h1>
      </div>
    )
  }
}

export default Parent
```

å­ç»„ä»¶:

```jsx
import React from 'react'

class Children extends React.Component {
  scoreHandle(score) {
    const { sayYourScore } = this.props
    sayYourScore(score)
  }

  render() {
    return (
      <div>
        <p>åšå‡ºä½ çš„é€‰æ‹©:</p>
        <button onClick={(e) => this.scoreHandle(20)}>è€ƒäº†20åˆ†</button>
        <button onClick={(e) => this.scoreHandle(50)}>è€ƒäº†50åˆ†</button>
        <button onClick={(e) => this.scoreHandle(70)}>è€ƒäº†70åˆ†</button>
        <button onClick={(e) => this.scoreHandle(92)}>è€ƒäº†92åˆ†</button>
      </div>
    )
  }
}

export default Children
```

**å®ç°ä½œç”¨åŸŸæ’æ§½**:

æŸäº›åœºæ™¯ä¸‹æ’æ§½çš„å†…å®¹å¯èƒ½æƒ³è¦åŒæ—¶ä½¿ç”¨çˆ¶ç»„ä»¶åŸŸå†…å’Œå­ç»„ä»¶åŸŸå†…çš„æ•°æ®ã€‚

```jsx
import React from 'react'

class Page extends React.Component {
  render() {
    const { left, right } = this.props
    return (
      <div>
        {left('å·¦è¾¹å†…å®¹')}
        <p>pageå†…å®¹...</p>
        {right('å³è¾¹å†…å®¹')}
      </div>
    )
  }
}

class App extends React.Component {
  render() {
    return (
      <div>
        <Page
          left={(text) => <span>{text}</span>}
          right={(text) => <span>{text}</span>}
        ></Page>
      </div>
    )
  }
}

export default App
```

åœ¨è¿™æ®µä»£ç ä¸­ï¼Œ**Page**æ˜¯ä¸€ä¸ªæ¥å—**left**å’Œ**right**å‡½æ•°ä½œä¸º props çš„å­ç»„ä»¶ï¼Œè€Œ**App**æ˜¯å°†è¿™äº› props å‘ä¸‹ä¼ é€’çš„çˆ¶ç»„ä»¶ã€‚**å‡½æ•°**å’Œ**æ•´ä¸ªç»„ä»¶**éƒ½å¯ä»¥ä½œä¸º props ä¼ é€’ï¼Œä»è€Œå®ç°å¤æ‚çš„äº¤äº’å’Œç»„åˆã€‚

### setState

React çš„ setState æ˜¯æ›´æ–°ç±»ç»„ä»¶çŠ¶æ€çš„ä¸»è¦æ–¹æ³•ï¼Œå¯å®ç°åŠ¨æ€ä¸”å“åº”è¿…é€Ÿçš„ç”¨æˆ·ç•Œé¢ã€‚

**setState åŸºæœ¬ä½¿ç”¨**

`setState(nextState, callback?)`å‡½æ•°æ˜¯ React ç±»ç»„ä»¶çš„ä¸€ä¸ªåŸºæœ¬æ–¹æ³•ã€‚ç”¨äºæ›´æ–°ç»„ä»¶çš„çŠ¶æ€ï¼Œå½“å‡½æ•°è°ƒç”¨æ—¶ä¼šè‡ªåŠ¨è§¦å‘é‡æ–°æ¸²æŸ“**redner**å‡½æ•°æ›´æ–°ç”¨æˆ·ç•Œé¢ä¸­çš„æ–°çŠ¶æ€ã€‚**setState** æ–¹æ³•æ¥æ”¶è¡¨ç¤ºæ–°çŠ¶æ€çš„å¯¹è±¡æˆ–ä¸€ä¸ªè¿”å›æ–°çŠ¶æ€å¯¹è±¡çš„å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯ç±»ç»„ä»¶ä½¿ç”¨**setState**çš„ç®€å•ç¤ºä¾‹:

```jsx
import React from 'react'

class App extends React.Component {
  constructor() {
    super()
    this.state = {
      count: 100,
    }
  }

  countHandle() {
    //å¦‚æœä½ ä¼ é€’ä¸€ä¸ªå¯¹è±¡ä½œä¸º `nextState`ï¼Œå®ƒå°†æµ…å±‚åˆå¹¶åˆ° `this.state` ä¸­ã€‚
    this.setState({
      count: this.state.count + 1,
    })
  }

  render() {
    const { count } = this.state
    return (
      <div>
        <h1> Appç»„ä»¶...</h1>

        <button onClick={(e) => this.countHandle()}> ++</button>

        <p>count:{count}</p>
      </div>
    )
  }
}

export default App
```

ä»¥ä¸‹æ˜¯ setState é¢å¤–ä½¿ç”¨æ–¹å¼:

```jsx
/*
å¦‚æœä½ ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸º nextStateï¼Œå®ƒå°†è¢«è§†ä¸ºæ›´æ–°å‡½æ•°ã€‚å®ƒå¿…é¡»æ˜¯ä¸ªçº¯å‡½æ•°ã€‚
å‡½æ•°ä¼šæ¥æ”¶åˆ°ä¹‹å‰çš„stateçŠ¶æ€åŠprops ä½œä¸ºå‚æ•°
*/
this.setState((state) => {
  return {
    count: state.count + 1,
  }
})
```

`setState(nextState, callback?)`ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°ä½¿ç”¨æ–¹å¼

```jsx
//å¦‚æœä½ æŒ‡å®šè¯¥å‡½æ•°ï¼ŒReact å°†åœ¨æäº¤æ›´æ–°åè°ƒç”¨ä½ æä¾›çš„ callbackã€‚
this.setState({ count: this.state.count + 1 }, () => {
  console.log(this.state.count)
})
```

**setState å¼‚æ­¥ç‰¹æ€§**

è°ƒç”¨ setState æ—¶ï¼Œè¯·åŠ¡å¿…è®°ä½å®ƒä¸ä¼šç«‹å³æ›´æ–°ç»„ä»¶çŠ¶æ€ã€‚å°† `setState` è§†ä¸º **è¯·æ±‚** è€Œä¼šä¸æ˜¯ä¼šç«‹å³æ›´æ–°ç»„ä»¶çš„å‘½ä»¤ã€‚å½“å¤šä¸ªç»„ä»¶æ›´æ–°å®ƒä»¬çš„ state æ¥å“åº”äº‹ä»¶æ—¶ï¼ŒReact å°†æ‰¹é‡æ›´æ–°å®ƒä»¬ï¼Œå¹¶åœ¨è¿™æ¬¡äº‹ä»¶ç»“æŸæ—¶å°†å®ƒä»¬ä¸€å¹¶é‡æ–°æ¸²æŸ“ã€‚ä»¥ä¸‹æ˜¯å¼‚æ­¥çš„éªŒè¯:

```jsx
this.setState({ count: this.state.count + 1 })

console.log(this.state.count) //100
```

åœ¨æˆ‘ä»¬æ‰§è¡Œä¸€æ¬¡ç‚¹å‡»äº‹ä»¶åæ§åˆ¶å°ä¾æ—§è¾“å‡ºä¸ºæ—§çš„çŠ¶æ€ã€‚

éœ€è¦å¼ºåˆ¶åŒæ­¥åº”ç”¨ç‰¹å®šçš„ state æ›´æ–°ï¼Œè¿™æ—¶ä½ å¯ä»¥å°†å…¶åŒ…è£…åœ¨ `flushSync`ä¸­ï¼Œä½†è¿™å¯èƒ½ä¼šæŸå®³æ€§èƒ½ã€‚

é‡‡ç”¨ä¸Šé¢çš„ setState ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°å¯ä»¥è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚

```jsx
import { flushSync } from 'react-dom'

flushSync(() => {
  this.setState({
    count: this.state.count + 1,
  })
})

console.log(this.state.count) //101
```

**ä¸ºä»€ä¹ˆæ˜¯ setState å¼‚æ­¥çš„**

- å¼‚æ­¥æé«˜æ€§èƒ½:å¦‚æœæ˜¯åŒæ­¥çš„è¯æ¯æ¬¡è°ƒç”¨ setState éƒ½è¦è¿›è¡Œä¸€æ¬¡æ›´æ–°,render å‡½æ•°å°†ä¼šé¢‘ç¹è°ƒç”¨,é¡µé¢ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ï¼ŒåŒæ­¥é‡æ–°æ¸²æŸ“æ•ˆç‡ä½ä¸‹ã€‚å»¶è¿Ÿåè°ƒä»¥ä¾¿æ‰¹é‡æ›´æ–°æ˜¯æœ€å¥½çš„ã€‚
- çŠ¶æ€åŒæ­¥:å¦‚æœåŒæ­¥æ›´æ–°äº† state,ä½†æ˜¯è¿˜æ²¡æœ‰æ‰§è¡Œ render å‡½æ•°ï¼Œå¯¼è‡´ state å’Œ props ä¸èƒ½ä¿æŒåŒæ­¥ã€‚

```jsx
import React from 'react'

class Top extends React.Component {
  render() {
    //çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ messageæ•°æ®
    const { message } = this.props
    return (
      <div>
        <h1> {message}</h1>
      </div>
    )
  }
}

class App extends React.Component {
  constructor() {
    super()
    this.state = {
      message: 'ğŸ±',
    }
  }

  countHandle() {
    this.setState({
      message: 'ğŸ•',
    })
  }

  render() {
    const { message } = this.state
    return (
      <div>
        <h1> Appç»„ä»¶...</h1>

        <button onClick={(e) => this.countHandle()}> changes</button>

        <Top message={message}></Top>
      </div>
    )
  }
}

export default App
```

App ç»„ä»¶é€šè¿‡**props**ä¼ ç»™å­ç»„ä»¶ message æ•°æ®,å¦‚æœ setState ä¸ºåŒæ­¥æ›´æ–°çš„è¯å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸åŒæ­¥é—®é¢˜ã€‚å½“ message å‘ç”Ÿæ”¹å˜åå¹¶æ²¡æœ‰åŠæ—¶è°ƒç”¨**render**å‡½æ•°,æ­¤æ—¶çˆ¶ç»„ä»¶ message å·²ç»ä¸ºæœ€æ–°çŠ¶æ€,ä½†å­ç»„ä»¶é¡µé¢è¿˜æ˜¯æ˜¾ç¤ºçš„æ—§æ•°æ®,[æ›´åŠ è¯¦ç»†çš„è¯´æ˜:](https://github.com/facebook/react/issues/11527#issuecomment-360199710)ã€‚

<Callout icon="âš ï¸" type="warning">

è¡¥å……è¯´æ˜:åœ¨ react18 ç‰ˆæœ¬å‰ setState å¯ä»¥æ˜¯åŒæ­¥çŠ¶æ€ï¼Œä»¥ä¸‹æ˜¯ä¼šäº§ç”ŸåŒæ­¥çš„æƒ…å†µ

</Callout>

```jsx
//äº¤ç»™æµè§ˆå™¨è¿›è¡Œæ‰§è¡Œ
setTimeout(() => {
  this.setState({ count: this.state.count + 1 })
}, 0)
//åŸç”ŸDOMäº‹ä»¶
const btn = document.getElementById('btn')
btn.onClick = function () {
  this.setState({ count: this.state.count + 1 })
}
```

React 18 ä¹‹å‰ï¼Œåªæœ‰ React äº‹ä»¶å¤„ç†å‡½æ•°å†…éƒ¨å®ç°æ‰¹é‡æ›´æ–°ï¼Œè€Œ promiseã€setTimeoutã€æœ¬åœ°äº‹ä»¶å¤„ç†å‡½æ•°æˆ–è€…å…¶ä»–äº‹ä»¶ä¸­æ›´æ–°çŠ¶æ€ï¼Œåœ¨ React ä¸­é»˜è®¤æ˜¯ä¸è¿›è¡Œæ‰¹é‡å¤„ç†çš„ã€‚[React 18 å¼€å§‹ï¼Œæ— è®ºæ¥è‡ªäºå“ªé‡Œï¼Œæ‰€æœ‰çš„æ›´æ–°éƒ½ä¼šè‡ªåŠ¨æ‰¹é‡å¤„ç†ã€‚è¿™æ„å‘³ç€ timeoutã€promiseã€æœ¬åœ°äº‹ä»¶å¤„ç†å‡½æ•°æˆ–è€…å…¶ä»–ä»»ä½•äº‹ä»¶çš„æ›´æ–°éƒ½ä¼šå’Œ React äº‹ä»¶å†…éƒ¨çš„æ›´æ–°ä¸€æ ·æ‰¹é‡å¤„ç†](https://zh-hans.react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching)ã€‚

**ä¸å¯å˜æ•°æ®**

state ä¸­å¯ä»¥ä¿å­˜ä»»æ„ç±»å‹çš„ JavaScript å€¼ï¼ŒåŒ…æ‹¬å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä½ ä¸åº”è¯¥ç›´æ¥ä¿®æ”¹å­˜æ”¾åœ¨ React state ä¸­çš„å¯¹è±¡ã€‚ç›¸åï¼Œå½“ä½ æƒ³è¦æ›´æ–°ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆæˆ–è€…å°†å…¶æ‹·è´ä¸€ä»½ï¼‰ï¼Œç„¶åå°† state æ›´æ–°ä¸ºæ­¤å¯¹è±¡ã€‚

ä»¥ä¸‹ä¸ºç¤ºä¾‹ä»£ç :

```jsx
import React from 'react'

class App extends React.Component {
  constructor() {
    super()
    this.state = {
      person: {
        name: 'x',
        age: 10,
      },
    }
  }

  countHandle() {
    const newPerson = { name: 'z', age: 20 }

    this.setState({
      person: newPerson,
    })
  }

  render() {
    const { person } = this.state
    return (
      <div>
        <h1>
          Appç»„ä»¶... person :{person.name} {person.age}
        </h1>

        <button onClick={(e) => this.countHandle()}> changes person</button>
      </div>
    )
  }
}

export default App
```

ä½ åº”è¯¥ **æŠŠæ‰€æœ‰å­˜æ”¾åœ¨ state ä¸­çš„ JavaScript å¯¹è±¡éƒ½è§†ä¸ºåªè¯»çš„**ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ‰‹åŠ¨åˆ¶é€ ä¸€ä¸ªç›´æ¥ä¿®æ”¹çŠ¶æ€ä¼šäº§ç”Ÿçš„é—®é¢˜:

```jsx
  countHandle() {
    const { person } = this.state
    person.name = 'z'
  }
```

å¥‡æ€ªçš„æ˜¯é¡µé¢å¹¶æ²¡æœ‰æ¸²æŸ“å‡ºæ–°çš„æ•°æ®ï¼Œ**å› ä¸ºå¹¶æ²¡æœ‰ä½¿ç”¨ state çš„è®¾ç½®å‡½æ•°ï¼ŒReact å¹¶ä¸çŸ¥é“å¯¹è±¡å·²æ›´æ”¹**ã€‚ç›´æ¥ä¿®æ”¹ state å¯èƒ½æ˜¯æœ‰æ•ˆçš„ï¼Œä½†å¹¶ä¸æ¨èè¿™ä¹ˆåšã€‚åº”è¯¥æŠŠåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥è®¿é—®åˆ°çš„ state è§†ä¸º**åªè¯»**çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†çœŸæ­£åœ° è§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠå®ƒä¼ é€’ç»™ state çš„è®¾ç½®å‡½æ•°å°±å’Œæœ€å¼€å§‹çš„ç¤ºä¾‹ä¸€æ ·ã€‚

React çš„çŠ¶æ€ä¸å¯å˜æœ¬è´¨ä¸Šæ˜¯å¼•ç”¨ä¸å¯å˜ï¼Œå› ä¸ºå¯¹äº JavaScript æ¥è¯´ï¼Œå¯¹è±¡æ˜¯ä¸€ç§å¼•ç”¨ç±»å‹ã€‚åœ¨ `setState` åï¼ŒReact ä¼šå¯¹æ–°æ—§ä¸¤ä¸ªçŠ¶æ€è¿›è¡Œæµ…æ¯”è¾ƒï¼Œå› ä¸º `state` æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ React ä¼šæ¯”è¾ƒæ–°æ—§ `state` çš„å¼•ç”¨ï¼Œåªæœ‰æ¯”è¾ƒç»“æœä¸º `false`ï¼Œæ‰ä¼šè¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥è¯´ï¼Œæ¯æ¬¡ `setState` æ›¿æ¢æ–°çš„å¯¹è±¡ï¼Œå…¶å®è´¨æ˜¯æ›¿æ¢å¯¹è±¡çš„å¼•ç”¨ï¼Œè®© React æ„ŸçŸ¥åˆ° `state` çš„å˜åŒ–ï¼ŒReact æ‰ä¼šè¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚

### ref

ç”¨äºç›´æ¥å¼•ç”¨ DOM èŠ‚ç‚¹æˆ–å¸Œæœ›ç»„ä»¶â€œè®°ä½â€æŸäº›ä¿¡æ¯ï¼Œä½†åˆä¸æƒ³è®©è¿™äº›ä¿¡æ¯ è§¦å‘æ–°çš„æ¸²æŸ“ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ ref è·å– DOM èŠ‚ç‚¹çš„ç¤ºä¾‹:

```jsx
import React, { createRef } from 'react'

class App extends React.Component {
  constructor() {
    super()

    this.h1El = createRef()
  }

  handleClick = () => {
    console.log(this.h1El.current) //<h1>Appç»„ä»¶...</h1>
  }

  render() {
    return (
      <div>
        <h1 ref={this.h1El}>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–DOM</button>
      </div>
    )
  }
}

export default App
```

å½“ç‚¹å‡»äº‹ä»¶å‘ç”Ÿæ—¶æ§åˆ¶å°å¯ä»¥æ­£ç¡®æ‰“å°å‡ºç»‘å®šçš„ h1 ç»„ä»¶ã€‚

**å°† Refs ä¼ é€’ç»™å­ç»„ä»¶**

ä»¥ä¸‹æ˜¯ä½¿ç”¨ ref å®ç°çˆ¶ç»„ä»¶æ§åˆ¶å­ç»„ä»¶ä¸­çš„è¾“å…¥ç„¦ç‚¹ç¤ºä¾‹:

```jsx
import React, { createRef } from 'react'

class Page extends React.PureComponent {
  render() {
    return (
      <>
        <input ref={this.props.refEl} />
      </>
    )
  }
}

class App extends React.PureComponent {
  constructor() {
    super()

    this.inputRef = createRef()
  }

  handleClick = () => {
    console.log(this.inputRef.current.focus())
  }

  render() {
    return (
      <div>
        <h1>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–å­ç»„ä»¶ç„¦ç‚¹</button>

        <Page refEl={this.inputRef}></Page>
      </div>
    )
  }
}

export default App
```

ä»¥ä¸Šæˆ‘ä»¬é€šè¿‡ props çš„å½¢å¼å°†çˆ¶ç»„ä»¶å®šä¹‰çš„ ref ä¼ é€’ç»™å­ç»„ä»¶å¹¶ç»‘å®šï¼Œreact æ›´æ¨èæˆ‘ä»¬ä½¿ç”¨ ref çš„å½¢å¼æ¥å®ç°:

```jsx
import React, { createRef } from 'react'

class Page extends React.PureComponent {
  render() {
    return <input {...this.props} />
  }
}

class App extends React.PureComponent {
  constructor() {
    super()

    this.inputRef = createRef()
  }

  handleClick = () => {
    console.log(this.inputRef.current)
    // console.log(this.inputRef.current.focus())
  }

  render() {
    return (
      <div>
        <h1>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–å­ç»„ä»¶ç„¦ç‚¹</button>

        <Page ref={this.inputRef}></Page>
      </div>
    )
  }
}

export default App
```

å½“æˆ‘ç‚¹å‡»æŒ‰é’®å‘ç°æ§åˆ¶å°æŠ¥é”™æç¤ºæˆ‘ä»¬`this.inputRef.current.focus`ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå‘ç°è¿™é‡Œè¿”å›çš„åˆ™ Page ç»„ä»¶å®ä¾‹ã€‚åŸå› åœ¨äº**React ä¸å…è®¸ç»„ä»¶è®¿é—®å…¶ä»–ç»„ä»¶çš„ DOM èŠ‚ç‚¹ã€‚ç”šè‡³è‡ªå·±çš„å­ç»„ä»¶ä¹Ÿä¸è¡Œï¼**ä»¥ä¸‹æ˜¯å®˜æ–¹ç¤ºä¾‹å†™æ³•:

```jsx
const MyInput = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />
})
```

ä¿®æ”¹åä»£ç å¦‚ä¸‹:

```jsx
import React, { createRef, forwardRef } from 'react'

class PageCnps extends React.PureComponent {
  render() {
    return <input ref={this.props.forwardRef} />
  }
}

const Page = forwardRef((props, ref) => {
  return <PageCnps {...props} forwardRef={ref}></PageCnps>
})

class App extends React.PureComponent {
  constructor() {
    super()

    this.inputRef = createRef()
  }

  handleClick = () => {
    console.log(this.inputRef.current.focus())
  }

  render() {
    return (
      <div>
        <h1>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–å­ç»„ä»¶ç„¦ç‚¹</button>

        <Page ref={this.inputRef}></Page>
      </div>
    )
  }
}

export default App
```

ç±»ç»„ä»¶åªèƒ½é€šè¿‡è¿™ç§ props ä¼ é€’çš„æ–¹å¼æ¥å®ç°,å¦‚æœæ˜¯å‡½æ•°å¼ç»„ä»¶å°†ä¼šç®€å•å¾ˆå¤š:

```jsx
const Page = forwardRef((props, ref) => {
  return <input {...props} ref={ref} />
})
```

**props ä¼ é€’ ref å’Œä½¿ç”¨ forwardRef çš„åŒºåˆ«**

- `ref`å±æ€§ä¸ä¼šè®©ä½ çš„ props API å˜å¾—è‡ƒè‚¿ã€‚
- `ref`å±æ€§åœ¨è·å– DOM èŠ‚ç‚¹æ—¶ï¼Œæ— è®ºæ˜¯ç±»ç»„ä»¶æˆ–å‡½æ•°å¼ç»„ä»¶é‡‡ç”¨ç»Ÿä¸€ Apiã€‚

**çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶å‡½æ•°**

å¦‚æœæ˜¯ç±»ç»„ä»¶,åªéœ€è¦å°† ref æŒ‚è½½åœ¨å­ç»„ä»¶ä¸Šå³å¯ã€‚åŸå› åœ¨äºå­ç»„ä»¶ç›¸å½“äºæ˜¯ç»„ä»¶çš„å®ä¾‹ï¼Œæœ€åå®é™…ä¸Šå°±æ˜¯åœ¨è°ƒç”¨ç»„ä»¶å®ä¾‹çš„å®ä¾‹æ–¹æ³•:

```jsx
import React, { createRef, forwardRef } from 'react'

class Page1 extends React.PureComponent {
  constructor() {
    super()

    this.inputRef = createRef()
  }

  inputHandle = () => {
    this.inputRef.current.focus()
  }

  render() {
    return (
      <>
        <input type="text" ref={this.inputRef} />
      </>
    )
  }
}

class App extends React.PureComponent {
  constructor() {
    super()
    this.inputRef = createRef()
  }

  handleClick = () => {
    //è°ƒç”¨ç»„ä»¶å®ä¾‹ä¸Šçš„å®ä¾‹æ–¹æ³•
    this.inputRef.current.inputHandle()
  }

  render() {
    return (
      <div>
        <h1>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–å­ç»„ä»¶ç„¦ç‚¹</button>
        //refæŒ‚åœ¨å­ç»„ä»¶ä¸Š
        <Page1 ref={this.inputRef}></Page1>
      </div>
    )
  }
}

export default App
```

ç›¸å¯¹äºå‡½æ•°ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶å¹¶æ²¡æœ‰å®ä¾‹å¦‚æœæƒ³è°ƒç”¨å­ç»„ä»¶çš„å‡½æ•°åˆ™éœ€è¦ `useImperativeHandle`

```jsx
import React, { createRef, forwardRef, useImperativeHandle } from 'react'

const Page = forwardRef((props, ref) => {
  const pageRef = createRef()

  function inputHandle() {
    pageRef.current.focus()
  }

  useImperativeHandle(
    ref, //è¯¥ ref æ˜¯ä½ ä» forwardRef æ¸²æŸ“å‡½æ•° ä¸­è·å¾—çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚
    () => {
      return {
        focus() {
          inputHandle()
        },
      }
    },
    [],
  )

  return <input {...props} ref={pageRef} />
})

class App extends React.PureComponent {
  constructor() {
    super()

    this.inputRef = createRef()
  }

  handleClick = () => {
    this.inputRef.current.focus()
  }

  render() {
    return (
      <div>
        <h1>Appç»„ä»¶...</h1>
        <button onClick={() => this.handleClick()}>è·å–å­ç»„ä»¶ç„¦ç‚¹</button>

        <Page ref={this.inputRef}></Page>
        <hr />
      </div>
    )
  }
}

export default App
```

### é«˜é˜¶ç»„ä»¶

é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰æ˜¯ React ä¸­ç”¨äºå¤ç”¨ç»„ä»¶é€»è¾‘çš„ä¸€ç§é«˜çº§æŠ€å·§ã€‚å…·ä½“è€Œè¨€ï¼Œ**é«˜é˜¶ç»„ä»¶æ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚**

```jsx
import React from 'react'

function withExtraProp(WrappedComponent) {
  return function (props) {
    return <WrappedComponent {...props} extraProp="I'm an extra prop!" />
  }
}

export default withExtraProp
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒwithExtraProp æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ã€‚å®ƒæ˜¯ä¸€ä¸ªä»¥ WrappedComponent ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªä½¿ç”¨é¢å¤– prop æ¸²æŸ“ WrappedComponent çš„æ–°ç»„ä»¶ã€‚

### é›†æˆ css

åœ¨ç°ä»£ React ä¸­ï¼Œæœ‰è®¸å¤šæ–¹æ³•å¯ä»¥ç”¨ CSS æ¥ä¸º React åº”ç”¨ç¨‹åºè®¾ç½®æ ·å¼ã€‚

**React ä¸­ä½¿ç”¨å†…è” css**

å¯ä»¥åœ¨ React æ–‡ä»¶ä¸­ä½¿ç”¨ CSS æ ·å¼ï¼Œå°±åƒåœ¨ HTML æ–‡ä»¶ä¸­ä½¿ç”¨å†…è” CSS ä¸€æ ·:

```jsx
import React from 'react'

class App extends React.PureComponent {
  render() {
    return (
      <div>
        {/* ä½¿ç”¨å†…è”æ ·å¼ ä¿®æ”¹å­—ä½“é¢œè‰² */}
        <h1 style={{ color: 'red' }}>Appç»„ä»¶...</h1>
      </div>
    )
  }
}

export default App
```

ç¼ºç‚¹:ä¹¦å†™ç¹ç,å¹¶ä¸”æ— æ³•ç¼–å†™ä¼ªç±»åŠä¼ªå…ƒç´ ã€‚

**åˆ›å»ºå¹¶å¯¼å…¥ css æ–‡ä»¶**

ä¸åœ¨ HTML æ–‡ä»¶ä¸­ä½¿ç”¨å¤–éƒ¨ CSS æ–‡ä»¶çš„æ–¹å¼ç±»ä¼¼ã€‚åˆ›å»º style.css æ–‡ä»¶å¹¶å†™å…¥å†…å®¹:

```css
.container {
  margin: 10px;
}
```

ç„¶åå°†å…¶å¯¼å…¥åˆ° React æ–‡ä»¶ä¸­ã€‚

```jsx
import { React } from 'React'
import './style.css'
function App() {
  return (
    <div className="container">
      <h1>Hello</h1>
    </div>
  )
}
export default App
```

ç¼ºç‚¹:æ ·å¼ä¹‹é—´ä¼šé‡å ,å¦‚æœä¸åŒçš„ react æ–‡ä»¶ä½¿ç”¨äº†ç›¸åŒçš„æ ·å¼åç§°å°†ä¼šé€ æˆé‡å æ ·å¼ã€‚

**css æ¨¡å—**

CSS æ¨¡å—æ˜¯ä¸€ä¸ª CSS æ–‡ä»¶ï¼Œå…¶ä¸­æ‰€æœ‰ç±»åå’ŒåŠ¨ç”»åç§°é»˜è®¤éƒ½æ˜¯æœ¬åœ°èŒƒå›´çš„ã€‚ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥å°†æ ·å¼å•ç‹¬åº”ç”¨äºæ¯ä¸ªç»„ä»¶ï¼Œè€Œä¸ä¼šå½±å“ä»»ä½•å…¶ä»–ç»„ä»¶çš„åŠŸèƒ½ã€‚åç§°éœ€ xxx.module.css,ä¾‹:åœ¨â€œsrcâ€ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ Home.module.css:

```css
.container {
  margin: 10px;
}
.btn {
  color: white;
  padding: 10px 20px;
  cursor: pointer;
  border: none;
}
```

react æ–‡ä»¶

```jsx
import HomeCSS from './Home.module.css'

export default function App() {
  return (
    <div className={HomeCSS.container}>
      <h1>Hello </h1>

      <button className={HomeCSS.btn}>Click Me!</button>
    </div>
  )
}
```

ç¼ºç‚¹:æ‰€æœ‰ className å¿…é¡»ä½¿ç”¨{`style.className`}å½¢å¼ç¼–å†™,ä¸æ–¹ä¾¿åŠ¨æ€ä¿®æ”¹æ ·å¼

**æ ·å¼ç»„ä»¶**

ä½¿ç”¨é¢„å®šä¹‰çš„ CSS å±æ€§è®¾è®¡å¯é‡å¤ä½¿ç”¨çš„è‡ªå®šä¹‰ HTML ç»„ä»¶ï¼Œå¹¶åœ¨é¡¹ç›®å†…é€‰æ‹©çš„ä»»ä½•ä½ç½®ä½¿ç”¨å®ƒä»¬ã€‚ä¾‹:**[Styled Components](https://styled-components.com/docs/basics#getting-started)**ã€‚

ç”±äºå®ƒæ˜¯ä¸€ä¸ª npm åŒ…ï¼Œå› æ­¤å¿…é¡»å°†å…¶å®‰è£…åœ¨ React åº”ç”¨ç¨‹åºä¸­ã€‚

```shell
npm install styled-components
```

ç„¶åå°±å¯ä»¥åœ¨ React åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒã€‚

```js
const Title = styled.h1`
  font-size: 1.5em;
  text-align: center;
  color: #bf4f74;
`

const Wrapper = styled.section`
  padding: 4em;
  background: papayawhip;
`

render(
  <Wrapper>
    <Title>Hello World!</Title>
  </Wrapper>,
)
```

### Hooks

React Hooks æ˜¯ç”±[React å›¢é˜Ÿ:Sebastian MarkbÃ¥ge](https://zh-hans.react.dev/community/team#sebastian-markb%C3%A5ge)å‘æ˜çš„ï¼Œç”¨äºåœ¨å‡½æ•°ç»„ä»¶ä¸­å¼•å…¥çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸåŠŸèƒ½ã€‚**hook åªèƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä¸èƒ½åœ¨ç±»ç»„ä»¶ï¼Œæˆ–å‡½æ•°ç»„ä»¶ä¹‹å¤–çš„åœ°æ–¹ä½¿ç”¨**ï¼Œå¹¶ä¸”å¿…é¡»ä»¥å•è¯ å¼€å¤´`use`ã€‚

**ä¸ºä»€ä¹ˆä½¿ç”¨ hooks?**

class ç»„ä»¶çš„ç¼ºç‚¹

- å¤æ‚ç»„ä»¶å˜å¾—éš¾ä»¥ç†è§£åŠç»´æŠ¤ : åœ¨æœ€åˆç¼–å†™ä¸€ä¸ª class ç»„ä»¶,å¾€å¾€æ˜¯æ¯”è¾ƒå®¹æ˜“çš„;ä½†éšç€ä¸šåŠ¡çš„å¢åŠ  class ç»„ä»¶ä¼šå˜å¾—å¤æ‚,ç”šè‡³åœ¨ç”Ÿå‘½å‘¨æœŸä¸­ä¼šåŒ…å«å¤§é‡çš„é€»è¾‘ä»£ç (ç½‘ç»œè¯·æ±‚,äº‹ä»¶ç›‘å¬,è¿˜éœ€è¦åœ¨ç»„ä»¶é”€æ¯æ˜¯ç§»é™¤),è€Œå¯¹äºè¿™æ ·çš„ class ç»„ä»¶æ‹†åˆ†å˜å¾—ååˆ†å›°éš¾,å› ä¸ºé€»è¾‘å¾€å¾€æ··åœ¨ä¸€èµ·ã€‚

- ç»„ä»¶å¤ç”¨çŠ¶æ€å›°éš¾ã€‚

class ç»„ä»¶çš„ä¼˜ç‚¹ä¸å‡½æ•°ç»„ä»¶çš„å¯¹æ¯”

- class ç»„ä»¶å¯ä»¥å®šä¹‰è‡ªå·±çš„ state,ç”¨äºä¿å­˜è‡ªå·±å†…éƒ¨çŠ¶æ€ã€‚å‡½æ•°å¼ç»„ä»¶ä¸å¯ä»¥,å› ä¸ºå‡½æ•°æ¯æ¬¡è°ƒç”¨éƒ½ä¼šäº§ç”Ÿæ–°çš„ä¸´æ—¶å˜é‡ã€‚

- class ç»„ä»¶æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ,æˆ‘ä»¬å¯ä»¥åœ¨å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸä¸­å®Œæˆè‡ªå·±çš„é€»è¾‘ã€‚å‡½æ•°ç»„ä»¶æ²¡æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸ,å¦‚æœåœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å‘é€è¯·æ±‚,æ„å‘³ç€æ¯æ¬¡æ¸²æŸ“éƒ½å°†é‡æ–°å‘é€ä¸€æ¬¡è¯·æ±‚ã€‚

- class ç»„ä»¶å¯ä»¥åœ¨çŠ¶æ€æ”¹å˜æ—¶é‡æ–°æ‰§è¡Œ render å‡½æ•°,ä»¥åŠé‡æ–°è°ƒç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç­‰ã€‚å‡½æ•°ç»„ä»¶åœ¨é‡æ–°æ¸²æŸ“æ—¶,æ•´ä¸ªå‡½æ•°éƒ½å°†æ‰§è¡Œ,æ²¡æœ‰åŠæ³•è®©ä»–åªè°ƒç”¨ä¸€æ¬¡ã€‚
